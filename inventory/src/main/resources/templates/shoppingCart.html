<!DOCTYPE html>
<html>
    <head>
                <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" ></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" ></script>
         <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
        <title>Senbazuru Order</title>
        <meta name="description" content="This is the description">
        <link rel="stylesheet" href="/css/styles.css" />
        <style>
            .button {
                background-color: #4CAF50;
                border: none;
                color: white;
                padding: 15px 32px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 16px;
                margin: 4px 2px;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
         <nav class="navbar navbar-expand-lg navbar-light bg-light">

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item active">
                        <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Open Sales/Table
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <a class="dropdown-item" href="/tables"> Open Table </a>
                            <a class="dropdown-item" href="/displaysales">Display Sales</a>

                        </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Finished Good
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <a class="dropdown-item" href="/finishedgood"> Display Finished Goods </a>
                            <a class="dropdown-item" href="/finishedgoodadder">Add Finished Good</a>

                        </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Raw Material
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <a class="dropdown-item" href="/rawmaterial"> Display Raw Materials </a>
                            <a class="dropdown-item" href="/rawmaterialadder">Add New Raw Material</a>

                        </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Acquisition
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <a class="dropdown-item" href="/displayacquisition"> Display Acquisitions </a>
                            <a class="dropdown-item" href="/acquisitionpage">Add Acquisition</a>

                        </div>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Scrapping
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <a class="dropdown-item" href="/displayscrap"> Display Scraps </a>
                            <a class="dropdown-item" href="/scrappage">Scrap Goods</a>

                        </div>
                    </li>
                </ul>
            </div>
        </nav>
        <header background-color="#776F6D">

        </header>

        <a th:href="@{'/shoppingCart/{id}'(id=1)}">
            <button type="button" class="button">Table 1</button>
        </a>
        <a th:href="@{'/shoppingCart/{id}'(id=2)}">
            <button type="button" class="button">Table 2</button>
        </a>

        <a th:href="@{'/shoppingCart/{id}'(id=3)}">
            <button type="button" class="button">Table 3</button>
        </a>

        <a th:href="@{'/shoppingCart/{id}'(id=4)}">
            <button type="button" class="button">Table 4</button>
        </a>

        <a th:href="@{'/shoppingCart/{id}'(id=5)}">
            <button type="button" class="button">Table 5</button>
        </a>

        <a th:href="@{'/shoppingCart/{id}'(id=6)}">
            <button type="button" class="button">Table 6</button>
        </a>

        <h1 align="center" background-color="#776F6D" th:text="'Current Table: '+${tableId}"></h1>

        <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Search for names.." title="Type in a name" size="100" style="margin:0px auto; display:block;">
        <div id="myUL">
            <section class="container content-section">
                <h2 class="section-header">Drinks</h2>
                <div class="shop-items">

                    <div class="shop-item" th:each="finishedGood : ${drinkList}">

                        <a class="shop-item-title" th:text="${finishedGood.name}"></a>
                        <img class="shop-item-image" th:src="@{${finishedGood.imageLink}}" style="width:100px;height:100px;">

                        <div class="shop-item-details">
                            <span class="shop-item-price" th:text="${finishedGood.sellingPrice}"></span>                       

                            <a th:href="@{'/shoppingCart/addProduct/{id}'(id=${finishedGood.id})}" class="col-md-1">

                                <button type="button" class="btn btn-primary shop-item-button" th:text="Buy">Buy</button>
                            </a>
                        </div>


                    </div> 
                </div> 


            </section>

            <section class="container content-section">
                <h2 class="section-header">Starters</h2>
                <div class="shop-items">

                    <div class="shop-item" th:each="finishedGood : ${starterList}">

                        <a class="shop-item-title" th:text="${finishedGood.name}"></a>
                        <img class="shop-item-image" th:src="@{${finishedGood.imageLink}}" style="width:100px;height:100px;">

                        <div class="shop-item-details">
                            <span class="shop-item-price" th:text="${finishedGood.sellingPrice}"></span>                       

                            <a th:href="@{'/shoppingCart/addProduct/{id}'(id=${finishedGood.id})}" class="col-md-1">

                                <button type="button" class="btn btn-primary shop-item-button" th:text="Buy">Buy</button>
                            </a>
                        </div>


                    </div> 
                </div> 


            </section>

            <section class="container content-section">
                <h2 class="section-header">Main Courses</h2>
                <div class="shop-items">

                    <div class="shop-item" th:each="finishedGood : ${maincourseList}">

                        <a class="shop-item-title" th:text="${finishedGood.name}"></a>
                        <img class="shop-item-image" th:src="@{${finishedGood.imageLink}}" style="width:100px;height:100px;">

                        <div class="shop-item-details">
                            <span class="shop-item-price" th:text="${finishedGood.sellingPrice}"></span>                       

                            <a th:href="@{'/shoppingCart/addProduct/{id}'(id=${finishedGood.id})}" class="col-md-1">

                                <button type="button" class="btn btn-primary shop-item-button" th:text="Buy">Buy</button>
                            </a>
                        </div>


                    </div> 
                </div> 


            </section>

            <section class="container content-section">
                <h2 class="section-header">Sushi</h2>
                <div class="shop-items">

                    <div class="shop-item" th:each="finishedGood : ${sushiList}">

                        <a class="shop-item-title" th:text="${finishedGood.name}"></a>
                        <img class="shop-item-image" th:src="@{${finishedGood.imageLink}}" style="width:100px;height:100px;">

                        <div class="shop-item-details">
                            <span class="shop-item-price" th:text="${finishedGood.sellingPrice}"></span>                       

                            <a th:href="@{'/shoppingCart/addProduct/{id}'(id=${finishedGood.id})}" class="col-md-1">

                                <button type="button" class="btn btn-primary shop-item-button" th:text="Buy">Buy</button>
                            </a>
                        </div>


                    </div> 
                </div> 


            </section>



            <section class="container content-section">
                <h2 class="section-header">Ramen</h2>
                <div class="shop-items">

                    <div class="shop-item" th:each="finishedGood : ${ramenList}">

                        <a class="shop-item-title" th:text="${finishedGood.name}"></a>
                        <img class="shop-item-image" th:src="@{${finishedGood.imageLink}}" style="width:100px;height:100px;">

                        <div class="shop-item-details">
                            <span class="shop-item-price" th:text="${finishedGood.sellingPrice}"></span>                       

                            <a th:href="@{'/shoppingCart/addProduct/{id}'(id=${finishedGood.id})}" class="col-md-1">

                                <button type="button" class="btn btn-primary shop-item-button" th:text="Buy">Buy</button>
                            </a>
                        </div>


                    </div> 
                </div> 


            </section>

            <section class="container content-section">
                <h2 class="section-header">Pho</h2>
                <div class="shop-items">

                    <div class="shop-item" th:each="finishedGood : ${phoList}">

                        <a class="shop-item-title" th:text="${finishedGood.name}"></a>
                        <img class="shop-item-image" th:src="@{${finishedGood.imageLink}}" style="width:100px;height:100px;">

                        <div class="shop-item-details">
                            <span class="shop-item-price" th:text="${finishedGood.sellingPrice}"></span>                       

                            <a th:href="@{'/shoppingCart/addProduct/{id}'(id=${finishedGood.id})}" class="col-md-1">

                                <button type="button" class="btn btn-primary shop-item-button" th:text="Buy">Buy</button>
                            </a>
                        </div>


                    </div> 
                </div> 


            </section>


            <section class="container content-section">
                <h2 class="section-header">Dessert</h2>
                <div class="shop-items">

                    <div class="shop-item" th:each="finishedGood : ${dessertList}">

                        <a class="shop-item-title" th:text="${finishedGood.name}"></a>
                        <img class="shop-item-image" th:src="@{${finishedGood.imageLink}}" style="width:100px;height:100px;">

                        <div class="shop-item-details">
                            <span class="shop-item-price" th:text="${finishedGood.sellingPrice}"></span>                       

                            <a th:href="@{'/shoppingCart/addProduct/{id}'(id=${finishedGood.id})}" class="col-md-1">

                                <button type="button" class="btn btn-primary shop-item-button" th:text="Buy">Buy</button>
                            </a>
                        </div>


                    </div> 
                </div> 


            </section>


        </div>


        <section class="container content-section">
            <h2 class="section-header">ORDERED ITEMS</h2>
            <div class="cart-row">
                <span class="cart-item cart-header cart-column">ITEM</span>
                <span class="cart-price cart-header cart-column">PRICE</span>
                <span class="cart-quantity cart-header cart-column">QUANTITY</span>
            </div>
            <div class="cart-row" th:each="product : ${products.entrySet()}">

                <span th:text="${product.getKey().name}" th:href="@{'/product/' + ${product.getKey().id}}" class="cart-item cart-header cart-column">Title</span>
                <span th:inline="text" class="cart-price cart-header cart-column">[[${product.getKey().sellingPrice}]] Huf</span>
                <span th:inline="text" class="cart-quantity cart-header cart-column">[[${product.getValue()}]]
                    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;

                    <a th:href="@{'/shoppingCart/removeProduct/{id}'(id=${product.getKey().id})}">
                        <button  type="button" class="btn btn-primary" th:text="Remove">Remove</button>
                    </a>
                </span>


            </div>


            <form action="#" data-th-action="@{/sale}" th:object="${DiscountCreationFormData}" method="POST" th:target="_blank">



                <div class="cart-total">
                    <strong class="cart-total-title">Discount (%)</strong>
                    <input class="cart-total-price" type="number" th:field="*{percentage}" id="discountPercentage" min="0" max="100" onchange="calculatePrice()" onkeyup="calculatePrice()"/><br/>
                    <span th:if="${#fields.hasErrors('percentage')}" th:errors="*{percentage}"></span>
                </div>

                <div class="cart-total">
                    <strong class="cart-total-title">Total</strong>
                    <span id="totalPrice" class="cart-total-price"  th:text="${total}"></span>
                </div>

                <input  class="btn btn-primary btn-purchase" th:name="recipe" type="submit" th:value="'Create recipe'" id="sendDiscountCreationFormData"/>
                <input  class="btn btn-primary btn-purchase" th:name="succesfulSale" type="submit" th:value="'Close Table Orders'" id="sendDiscountCreationFormData"/>

            </form>
            


        </section>



        <script>
            function myFunction() {
                var input, filter, ul, li, a, i, txtValue;
                input = document.getElementById("myInput");
                filter = input.value.toUpperCase();
                ul = document.getElementById("myUL");
                li = ul.getElementsByClassName("shop-item");
                for (i = 0; i < li.length; i++) {
                    a = li[i].getElementsByTagName("a")[0];
                    txtValue = a.textContent || a.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        li[i].style.display = "";
                    } else {
                        li[i].style.display = "none";
                    }
                }
            }
        </script>

         <script type="text/javascript" th:inline="javascript">
            function calculatePrice() {

                var price = [[${total}]];
                var discountPercentage = document.getElementById("discountPercentage").value;
                var newPrice = price * (1 - (discountPercentage / 100));
                var formattedPrice = parseFloat(newPrice).toFixed(2);
                document.getElementById("totalPrice").innerHTML = formattedPrice;


            }
        </script>
        




    </body>
</html>
